<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Hyper Game Hub</title>
<style>
  :root{--bg:#000;--panel:#111;--accent:#ff3030;--card:#222;--text:#ddd;}
  body{margin:0;font-family:sans-serif;background:var(--bg);color:var(--text);display:flex;overflow:hidden;}
  .sidebar{width:220px;background:var(--panel);padding:12px;display:flex;flex-direction:column;gap:8px;border-right:1px solid #222;}
  .sidebar button{background:var(--card);border:none;color:var(--text);padding:10px;border-radius:6px;cursor:pointer;}
  .sidebar button.active{background:#333;color:var(--accent);font-weight:700;}
  .main{flex:1;display:flex;flex-direction:column;overflow:hidden;}
  .topbar{height:50px;background:var(--panel);border-bottom:1px solid #222;display:flex;align-items:center;padding:0 12px;gap:8px;}
  .content{flex:1;overflow:auto;padding:12px;}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px;}
  .card{background:var(--card);border-radius:10px;overflow:hidden;cursor:pointer;transition:.15s;}
  .card:hover{transform:translateY(-4px);box-shadow:0 6px 16px rgba(255,48,48,.1);}
  .card img{width:100%;aspect-ratio:1/1;object-fit:cover;}
  .card h3{text-align:center;padding:6px;font-size:.85rem;}
</style>
</head>
<body>
  <div class="sidebar" id="sidebar">
    <button class="active" data-zone="Home">Home</button>
    <button data-zone="PC">PC</button>
    <button data-zone="Moblie">Moblie</button>
    <button data-zone="N64">N64</button>
    <button data-zone="NDS">NDS</button>
    <button data-zone="PS1">PS1</button>
    <button data-zone="Game Boy">Game Boy</button>
    <button data-zone="Game Boy Advanced">Game Boy Advanced</button>
    <button data-zone="Game Boy Color">Game Boy Color</button>
    <button data-zone="NES">NES</button>
    <button data-zone="SNES">SNES</button>
    <button data-zone="Sega Genisis">Sega Genisis</button>
  </div>
  <div class="main">
    <div class="topbar"><h2 id="zoneTitle">Home</h2></div>
    <div class="content" id="contentArea">Loading...</div>
  </div>

<script>
const contentArea = document.getElementById('contentArea');
const zoneTitle = document.getElementById('zoneTitle');
const buttons = document.querySelectorAll('.sidebar button');

let allGames = [];

// Fetch JSON of all games
async function fetchGames() {
  try {
    const res = await fetch('https://raw.githubusercontent.com/GLITCHED-OVERRIDE/Hypper-Drive-2/refs/heads/main/Games/Zones.json');
    allGames = await res.json();
  } catch(e){
    contentArea.innerHTML = '<p style="color:#aaa;">Failed to load games</p>';
  }
}

// Render a zone or home
async function renderZone(zone){
  zoneTitle.textContent = zone;
  contentArea.innerHTML = '';
  if(zone === 'Home'){
    contentArea.innerHTML = '<p>Welcome! Select a zone to view games.</p>';
    return;
  }
  const games = allGames.filter(g => g.type === zone);
  if(games.length === 0){
    // Fetch 404 page
    const html = await fetch('https://raw.githubusercontent.com/GLITCHED-OVERRIDE/Malfunction/refs/heads/main/Pages/404.html')
                        .then(r=>r.text())
                        .catch(()=>'<h1>404 Not Found</h1>');
    contentArea.innerHTML = html;
    return;
  }

  const grid = document.createElement('div');
  grid.className = 'grid';
  games.forEach(g => {
    const card = document.createElement('div');
    card.className = 'card';
    card.innerHTML = `<img src="${g.cover}" alt="${g.name}"><h3>${g.name}</h3>`;
    card.onclick = async () => {
      try {
        const gameHTML = await fetch(g.url).then(r=>r.text());
        document.open();
        document.write(gameHTML);
        document.close();
      } catch(e){
        const fallback = await fetch('https://raw.githubusercontent.com/GLITCHED-OVERRIDE/Malfunction/refs/heads/main/Pages/404.html')
                                .then(r=>r.text())
                                .catch(()=>'<h1>404 Not Found</h1>');
        document.open();
        document.write(fallback);
        document.close();
      }
    }
    grid.appendChild(card);
  });
  contentArea.appendChild(grid);
}

// Sidebar buttons
buttons.forEach(btn => {
  btn.onclick = () => {
    buttons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    renderZone(btn.dataset.zone);
  }
});

// Initialize
fetchGames().then(()=>renderZone('Home'));
</script>
</body>
</html>
